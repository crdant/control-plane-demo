[devshell]
name = "project-dev-shell"
motd = """
{202}ðŸš€ Welcome to the development environment!{reset}

{14}Available tools:{reset}
  â€¢ {202}helm{reset} - Kubernetes package manager
  â€¢ {202}kubectl{reset} - Kubernetes CLI
  â€¢ {202}replicated{reset} - Replicated Platform CLI
  â€¢ {202}sops{reset} - Secrets management
  â€¢ {202}git{reset}, {202}jq{reset}, {202}yq{reset} - Development utilities

{14}Quick start:{reset}
  â€¢ Run {202}direnv allow{reset} to activate the environment
  â€¢ Check {202}make help{reset} for available targets
  â€¢ Use {202}sops{reset} for secrets management

"""


packages = [
  "git",
  "gnumake", 
  "sops",
  "age",
  "gnupg",
  "curl",
  "jq",
  "yq-go",
  "kubernetes-helm",
  "kubectl"
]

[devshell.startup.load_dotenv]
text = """
# Load environment variables from .env if it exists
if [ -f .env ]; then
  echo "Loading environment variables from .env"
  set -a
  source .env
  set +a
fi
"""

[devshell.startup.project_setup]
text = """
# Create necessary directories
mkdir -p .local/bin
mkdir -p .local/share
mkdir -p tmp

# Add local bin to PATH if not already there
if [[ ":$PATH:" != *":.local/bin:"* ]]; then
  export PATH="$PWD/.local/bin:$PATH"
fi
"""